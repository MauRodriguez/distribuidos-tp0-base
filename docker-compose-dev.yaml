version: '3.9'
name: tp0
services:
    server:
        volumes:
            - ./server/config.ini:/config.ini
        container_name: server
        image: server:latest
        entrypoint: python3 /main.py
        environment:
            - PYTHONUNBUFFERED=1
            - LOGGING_LEVEL=DEBUG
        networks:
            - testing_net

    client1:
        container_name: client1
        volumes:
            - ./client/config.ini:/config.ini
        image: client:latest
        entrypoint: python3 /main.py
        environment:
            - CLI_ID=1
            - CLI_LOG_LEVEL=DEBUG
            - NOMBRE=Santiago Lionel
            - APELLIDO=Lorca
            - DOCUMENTO=30904465
            - NACIMIENTO=1999-03-17
            - NUMERO=7574
        networks:
            - testing_net
        depends_on:
            - server

    client2:
        container_name: client2
        volumes:
            - ./client/config.ini:/config.ini
        image: client:latest
        entrypoint: python3 /main.py
        environment:
            - CLI_ID=2
            - CLI_LOG_LEVEL=DEBUG
            - NOMBRE=Sergio
            - APELLIDO=Ramos
            - DOCUMENTO=47904465
            - NACIMIENTO=1999-07-17
            - NUMERO=7578
        networks:
            - testing_net
        depends_on:
            - server

    client3:
        container_name: client3
        volumes:
            - ./client/config.ini:/config.ini
        image: client:latest
        entrypoint: python3 /main.py
        environment:
            - CLI_ID=3
            - CLI_LOG_LEVEL=DEBUG
            - NOMBRE=Mariano
            - APELLIDO=Lopez
            - DOCUMENTO=30474465
            - NACIMIENTO=1999-06-17
            - NUMERO=7577
        networks:
            - testing_net
        depends_on:
            - server

    client4:
        container_name: client4
        volumes:
            - ./client/config.ini:/config.ini
        image: client:latest
        entrypoint: python3 /main.py
        environment:
            - CLI_ID=4
            - CLI_LOG_LEVEL=DEBUG
            - NOMBRE=Pepe
            - APELLIDO=Santillana
            - DOCUMENTO=30904765
            - NACIMIENTO=1999-05-17
            - NUMERO=7576
        networks:
            - testing_net
        depends_on:
            - server

    client5:
        container_name: client5
        volumes:
            - ./client/config.ini:/config.ini
        image: client:latest
        entrypoint: python3 /main.py
        environment:
            - CLI_ID=5
            - CLI_LOG_LEVEL=DEBUG
            - NOMBRE=Miguel
            - APELLIDO=Espora
            - DOCUMENTO=30904447
            - NACIMIENTO=1999-04-17
            - NUMERO=7575
        networks:
            - testing_net
        depends_on:
            - server

networks:
    testing_net:
        ipam:
            driver: default
            config:
                - subnet: 172.25.125.0/24
